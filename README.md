# V0 Web App Development

AIを活用したバナー広告クリエイティブ生成アプリケーション

## 🚀 機能

- **N1インタビュー録分析**: テキスト・音声ファイルからペルソナ・課題・ベネフィットを抽出
- **バナーコピー生成**: AI生成による効果的な広告コピー作成
- **バナーデザイン**: 複数サイズ・背景スタイル対応のバナー生成
- **3段階ワークフロー**: コピー生成 → デザイン設定 → プレビュー

## 🛠️ 技術スタック

- **フロントエンド**: Next.js 15, React 19, TypeScript
- **UI**: Tailwind CSS, Radix UI, Shadcn/ui
- **バックエンド**: Supabase (PostgreSQL, Authentication, Storage)
- **デプロイ**: Vercel

## 📋 セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 環境変数の設定

`.env.local`ファイルを作成し、以下の環境変数を設定：

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 3. Supabaseデータベースのセットアップ

`supabase_setup.sql`ファイルをSupabaseのSQL Editorで実行してテーブルとポリシーを作成します。

### 4. 開発サーバーの起動

```bash
npm run dev
```

## 🔧 テストモード

環境変数が設定されていない場合、アプリケーションは自動的にテストモードで動作します：

- モックデータを使用
- 認証なしでアクセス可能
- 全機能をローカルで確認可能

## 🔐 Row Level Security (RLS) について

Supabaseでは行レベルセキュリティが有効になっており、以下のポリシーが設定されています：

### 本番用ポリシー
- 認証されたユーザーのみが自分のデータにアクセス可能

### テスト用ポリシー
- 認証なしでもデータの読み書きが可能
- デモ・開発環境での動作確認用

### RLSエラーの解決

`new row violates row-level security policy`エラーが発生した場合：

1. **環境変数の確認**: Supabaseの設定が正しいか確認
2. **認証状態の確認**: ユーザーがログインしているか確認
3. **テストポリシーの適用**: `supabase_setup.sql`のテストポリシーが適用されているか確認

## 📁 プロジェクト構造

```
├── app/                    # Next.js App Router
│   ├── interview/         # インタビュー録アップロード
│   ├── brief/            # ブリーフ作成
│   ├── banner-copy/      # バナーコピー生成
│   └── api/              # APIエンドポイント
├── components/           # UIコンポーネント
│   ├── ui/              # 基本UIコンポーネント
│   └── banner-copy/     # バナーコピー関連コンポーネント
├── lib/                 # ユーティリティ
│   ├── supabase.ts     # Supabase設定
│   └── supabaseUtils.ts # データベース操作
└── supabase_setup.sql  # データベーススキーマ
```

## 🎯 使用方法

1. **インタビュー録のアップロード** (`/interview`)
   - テキスト直接入力またはファイルアップロード
   - AIによる自動分析

2. **ブリーフの作成** (`/brief`)
   - ペルソナ・課題・ベネフィットの入力
   - 必須ワードの指定

3. **バナーコピーの生成** (`/banner-copy`)
   - AIによるコピー生成
   - 手動編集可能
   - 文字数制限付き

4. **デザイン設定**
   - バナーサイズ選択（6種類）
   - 背景スタイル選択
   - プレビュー機能

## 🚨 トラブルシューティング

### よくあるエラー

1. **RLSエラー**: 上記のRLS設定を確認
2. **依存関係エラー**: `npm install`を再実行
3. **ビルドエラー**: TypeScriptの型エラーを確認

### デバッグ

- ブラウザの開発者ツールでコンソールログを確認
- Supabaseダッシュボードでデータベースの状態を確認

## 📝 今後の改善予定

- [ ] 実際のAI API統合
- [ ] バナー画像生成機能
- [ ] ダウンロード機能
- [ ] A/Bテスト機能
- [ ] テンプレート機能
- [ ] パフォーマンス分析

## 🤝 コントリビューション

1. フォークしてブランチを作成
2. 変更を実装
3. テストを実行
4. プルリクエストを作成

## 📄 ライセンス

MIT License